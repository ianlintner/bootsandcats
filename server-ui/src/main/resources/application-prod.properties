# Production Configuration

# Database Configuration (PostgreSQL for production)
spring.datasource.url=${DATABASE_URL:jdbc:postgresql://localhost:5432/oauth2db}
spring.datasource.username=${DATABASE_USERNAME:postgres}
spring.datasource.password=${DATABASE_PASSWORD:postgres}
spring.datasource.driverClassName=org.postgresql.Driver
# Hibernate auto-detects PostgreSQL dialect - no need to specify explicitly
spring.jpa.hibernate.ddl-auto=validate

# Disable H2 Console in production
spring.h2.console.enabled=false

# Security Configuration
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.same-site=strict
server.servlet.session.timeout=15m

# SSL handled by load balancer/ingress in production
server.ssl.enabled=${SERVER_SSL_ENABLED:false}
# server.ssl.key-store=classpath:keystore.p12
# server.ssl.key-store-password=${SSL_KEYSTORE_PASSWORD}
# server.ssl.key-store-type=PKCS12
# server.ssl.key-alias=oauth2

# Actuator Security
management.endpoints.web.exposure.include=health,info,prometheus
management.endpoint.health.show-details=never

# OpenTelemetry Configuration
otel.exporter.otlp.endpoint=${OTEL_EXPORTER_ENDPOINT:http://localhost:4317}
otel.service.name=oauth2-authorization-server
# Note: resource attributes should be set via environment variables or separate properties
# otel.resource.attributes.service.namespace=production
# otel.resource.attributes.deployment.environment=prod

# Logging
logging.level.org.springframework.security=WARN
logging.level.org.springframework.security.oauth2=WARN
logging.level.com.bootsandcats=INFO

# OAuth2 Configuration (MUST be set via environment variables in production)
oauth2.issuer-url=${OAUTH2_ISSUER_URL}
oauth2.demo-client-secret=${OAUTH2_DEMO_CLIENT_SECRET}
oauth2.m2m-client-secret=${OAUTH2_M2M_CLIENT_SECRET}
oauth2.demo-user-password=${OAUTH2_DEMO_USER_PASSWORD}
oauth2.admin-user-password=${OAUTH2_ADMIN_USER_PASSWORD}
