# Profile: prod-no-db
#
# Purpose: Run the OAuth2 server with NO database dependencies (no Postgres, no Flyway, no JPA).
# Durable configuration is expected to come from Kubernetes CRDs (clients/scopes/deny rules),
# and runtime session state can be backed by Redis.

# Disable Flyway and all DB/JPA auto-configuration.
# This prevents Spring Boot from attempting to create a DataSource/Hikari pool and JPA EntityManager.
#
# Note: leaving spring.datasource.* properties present in other profiles is fine as long as the
# relevant auto-configurations are excluded here.
spring.autoconfigure.exclude=org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration,org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration,org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration,org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.data.jpa.DataJpaRepositoriesAutoConfiguration,org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration

# Ensure schema validation is not attempted.
spring.jpa.hibernate.ddl-auto=none
spring.flyway.enabled=false

# Belt-and-suspenders: explicitly disable JPA repositories and clear any inherited JDBC settings
# from other active profiles (e.g. "prod" / "prod-no-flyway").
spring.data.jpa.repositories.enabled=false
spring.datasource.url=
spring.datasource.username=
spring.datasource.password=
spring.datasource.driver-class-name=
