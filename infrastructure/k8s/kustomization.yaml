apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  # Canonical SecretProviderClasses + placeholder Secrets
  - secrets

  # Data services
  - cnpg-operator.yaml
  - postgres.yaml
  - redis.yaml

  # OAuth2 server and apps
  - flyway-migrations-configmap.yaml
  - oauth2-server-deployment.yaml
  - profile-service-deployment.yaml
  - github-review-service-deployment.yaml
  - pdb.yaml

  # Istio and authn/z
  - envoy-oauth2-sds-configmap.yaml
  - istio-authz-policy.yaml
  - requestauthentication-chat.yaml
  - requestauthentication-github-review.yaml
  - requestauthentication-profile.yaml
  - envoyfilter-chat-jwt-to-headers.yaml
  - envoyfilter-chat-oauth2-exchange.yaml
  - envoyfilter-github-review-jwt-to-headers.yaml
  - envoyfilter-github-review-oauth2-exchange.yaml
  - envoyfilter-profile-jwt-to-headers.yaml
  - envoyfilter-profile-oauth2-exchange.yaml
  - serviceentry-oauth2.yaml
  - virtualservices.yaml
