apiVersion: security.istio.io/v1
kind: RequestAuthentication
metadata:
  name: default-jwt-auth
  namespace: default
  labels:
    app.kubernetes.io/managed-by: kustomize
    project: bootsandcats
spec:
  # Namespace-scoped JWT validation context.
  #
  # This enables AuthorizationPolicy rules like "require requestPrincipal".
  # It does not enforce authentication by itself.
  jwtRules:
  - issuer: "https://oauth2.cat-herding.net"
    jwksUri: "http://oauth2-server.default.svc.cluster.local:9000/oauth2/jwks"
    outputPayloadToHeader: "x-jwt-payload"
