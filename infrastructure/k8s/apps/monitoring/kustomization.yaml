apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

resources:
  - grafana.yaml
  - prometheus.yaml
  - tempo.yaml
  - otel-collector.yaml

# NOTE: Grafana expects a Secret named `grafana-admin-secret` with keys
# `admin-user` and `admin-password`.
#
# We ship an example manifest at:
#   infrastructure/k8s/apps/monitoring/grafana-admin-secret.example.yaml
#
# Do NOT commit real credentials.

generatorOptions:
  disableNameSuffixHash: true

configMapGenerator:
  - name: prometheus-config
    files:
      - prometheus.yml
  - name: grafana-datasources
    files:
      - grafana/provisioning/datasources/datasources.yaml
  - name: grafana-dashboards-provisioning
    files:
      - grafana/provisioning/dashboards/dashboards.yaml
  - name: grafana-dashboards
    files:
      - grafana/dashboards/oauth2-slos.json
      - grafana/dashboards/oauth2-endpoints.json
  - name: tempo-config
    files:
      - tempo/tempo.yaml
  - name: otel-collector-config
    files:
      - otel-collector-config.yaml
